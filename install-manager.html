<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>fogbow</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="shortcut icon" href="http://www.fogbowcloud.org/theme/img/icons/favicon.ico" />
    <link rel="stylesheet" href="http://www.fogbowcloud.org/theme/css/bootstrap.css">
  </head>
  <body>
    <div class="navbar navbar-default navbar-fixed-top">
      <div class="container">
        <div class="navbar-header">
          <a href="../" class="navbar-brand">fogbow</a>
          <button class="navbar-toggle" type="button" data-toggle="collapse" data-target="#navbar-main">
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
        </div>
        <ul class="nav navbar-nav navbar-right">
          <li class="active">
            <a href="http://www.fogbowcloud.org/install-opportunism.html">Install</a>
          </li>
          <li >
            <a href="http://www.fogbowcloud.org/architecture.html">How it works</a>
          </li>
          <li >
            <a href="http://www.fogbowcloud.org/manager-cli.html">How to use it</a>
          </li>
          <li><a href="#">Contact us</a></li>
        </ul>
      </div>
    </div>
     <div class="container">
      <div class="bs-docs-section">
    <div class="bs-docs-section">
    <div class="row">
      <div class="col-lg-4">
      	<br>
        <ul class="nav nav-pills nav-stacked" style="max-width: 300px;">
            <li >
            	<a href="install-general">General Installation</a>
            </li>
            <li >
            	<a href="install-opportunism">Opportunism</a>
            </li>
            <li >
            	<a href="install-rendezvous">Rendezvous</a>
            </li>
            <li class="active">
            	<a href="install-manager">Manager</a>
            </li>
        </ul>
      </div>
      <div class="col-lg-8 page-content">
      	<h1>Manager</h1>
<p>The Manager is the federation service that should run on each federation member. It provides an extended OCCI API for final users and interacts with Rendezvous and other Managers.  </p>
<h2>Install</h2>
<p>To set up Manager, first, get the latest code of the project.</p>
<div class="highlight"><pre>git clone https://github.com/fogbow/fogbow-manager.git
</pre></div>


<p>Then, install it in your machine.</p>
<div class="highlight"><pre>mvn install -D
</pre></div>


<h2>Configure</h2>
<p>Currently we are using the OCCI interface of the cloud. Then, this is a requirement to use manager to request resources and it is configured at the file.
After the installation the user can configure a few properties. All sections listed below are part of the same file.</p>
<ul>
<li><strong>XMPP properties:</strong> Manager and Rendezvous XMPP properties that will be used to comunication between components.  </li>
</ul>
<div class="highlight"><pre><span class="c"># jid of your Manager Component</span>
<span class="c"># Example:</span>
<span class="nv">xmpp_jid</span><span class="o">=</span>manager.test.com

<span class="c"># Component password</span>
<span class="c"># Example:</span>
<span class="nv">xmpp_password</span><span class="o">=</span>password

<span class="c"># IP address.</span>
<span class="c"># Example:</span>
<span class="nv">xmpp_host</span><span class="o">=</span>127.0.0.1

<span class="c"># Port in which the server will be listening.</span>
<span class="c"># Example:</span>
<span class="nv">xmpp_port</span><span class="o">=</span>5347

<span class="c"># jid of your Rendezvous Component</span>
<span class="c"># Example:</span>
<span class="nv">rendezvous_jid</span><span class="o">=</span>rendezvous.test.com
</pre></div>


<ul>
<li><strong>Cloud Compute Information:</strong> All compute information required by compute plugin that will be used. Different plugins can require different information depending on their implementation. This section shows properties required by OpenStack compute plugin (currently provided by fogbow).</li>
</ul>
<div class="highlight"><pre><span class="c"># Compute plugin class</span>
<span class="c"># Example:</span>
<span class="nv">compute_class</span><span class="o">=</span>org.fogbowcloud.manager.core.plugins.openstack.OpenStackComputePlugin

<span class="c"># Cloud OCCI endpoint</span>
<span class="c"># Example:</span>
<span class="nv">compute_openstack_occi_url</span><span class="o">=</span>http://localhost:8182

<span class="c"># Cloud v2 compute endpoint</span>
<span class="c"># Example:</span>
<span class="nv">compute_openstack_v2api_url</span><span class="o">=</span>http://localhost:8182

<span class="c"># Associating local cloud flavors to fogbow flavors</span>
<span class="c"># Small flavor</span>
<span class="c"># Example:</span>
<span class="nv">compute_openstack_flavor_small</span><span class="o">=</span>m1-small

<span class="c"># Medium flavor</span>
<span class="c"># Example:</span>
<span class="nv">compute_openstack_flavor_medium</span><span class="o">=</span>m1-medium

<span class="c"># Large flavor</span>
<span class="c"># Example:</span>
<span class="nv">compute_openstack_flavor_large</span><span class="o">=</span>m1-large

<span class="c"># Image</span>
<span class="c"># Example:</span>
<span class="nv">compute_openstack_default_cirros_image</span><span class="o">=</span>cadf2e29-7216-4a5e-9364-cf6513d5f1fd
</pre></div>


<ul>
<li><strong>Cloud Identity Information:</strong> All identity information required by identity plugin that will be used. Cloud identity is used to get and authenticate tokens for local cloud users. This section shows properties required by OpenStack identity plugin (currently provided by fogbow). </li>
</ul>
<div class="highlight"><pre><span class="c"># Identity plugin class</span>
<span class="c"># Example:</span>
<span class="nv">identity_class</span><span class="o">=</span>org.fogbowcloud.manager.core.plugins.openstack.OpenStackIdentityPlugin

<span class="c"># Cloud identity endpoint</span>
<span class="c"># Example:</span>
<span class="nv">identity_openstack_url</span><span class="o">=</span>http://localhost:5000
</pre></div>


<ul>
<li><strong>Federation User Information:</strong> Cloud federation user is a local cloud user that will submit requests from remote members.</li>
</ul>
<div class="highlight"><pre><span class="c"># Federation user name</span>
<span class="c"># Example:</span>
<span class="nv">federation_user_name</span><span class="o">=</span>fogbow

<span class="c"># Federation user password</span>
<span class="c"># Example:</span>
<span class="nv">federation_user_password</span><span class="o">=</span>fogbow

<span class="c"># Federation user tenant (project) name</span>
<span class="c"># Example:</span>
<span class="nv">federation_user_tenant_name</span><span class="o">=</span>demo
</pre></div>


<ul>
<li><strong>Validator Member Information:</strong> Validator member is used to define if the manager can receive or donate to another one. It is possible differents implementations for it, and each implementation can require specific properties (as idnetity and compute plugin). This section shows properties required by default member validator (all member can receive and donate resources to each other).</li>
</ul>
<div class="highlight"><pre><span class="c"># Member validator class</span>
<span class="c"># Example:</span>
<span class="nv">member_validator</span><span class="o">=</span>org.fogbowcloud.manager.core.DefaultMemberValidator

<span class="c"># Member certificate file contains the certificate the should be used by the manager </span>
<span class="c"># Example:</span>
<span class="nv">cert_path</span><span class="o">=</span>path/certificate/file
</pre></div>


<ul>
<li><strong>Times Properties:</strong> Time configuration required by Manager Component.</li>
</ul>
<div class="highlight"><pre><span class="c"># Scheduler period is the interval of time that the Manager Component will periodicaly submit requests that are not fulfilled yet</span>
<span class="c"># Uses miliseconds unit</span>
<span class="c"># Example:</span>
<span class="nv">scheduler_period</span><span class="o">=</span>30000

<span class="c"># Token update period is the interval of time that the Manager Component will check if it is needed to get new token for requests and get it if yes</span>
<span class="c"># Uses miliseconds unit</span>
<span class="c"># Example:</span>
<span class="nv">token_update_period</span><span class="o">=</span>300000

<span class="c"># Instance monitoring period is the interval of time that the Manager Component will check if the request&#39;s instance still exists. If not, the manager will update request state according to request&#39;s attributes</span>
<span class="c"># Uses miliseconds unit</span>
<span class="c"># Example:</span>
<span class="nv">instance_monitoring_period</span><span class="o">=</span>120000
</pre></div>


<ul>
<li><strong>SSH Tunnel Properties:</strong> SSH properties are used to give connectivity for instances.</li>
</ul>
<div class="highlight"><pre><span class="c"># IP address of shh tunnel host</span>
<span class="c"># Example:</span>
<span class="nv">ssh_tunnel_host</span><span class="o">=</span>10.0.0.1

<span class="c"># shh tunnel user is a valid user at tunnel host. This user must not requere password</span>
<span class="c"># Example:</span>
<span class="nv">ssh_tunnel_user</span><span class="o">=</span>fogbow

<span class="c"># shh tunnel port range defines set of ports that should be used to create reverse tunnels to the instances</span>
<span class="c"># Example:</span>
<span class="nv">ssh_tunnel_port_range</span><span class="o">=</span>50000:59999
</pre></div>


<ul>
<li><strong>Manager HTTP Port:</strong> HTTP port which manager component endpoint will be listening.</li>
</ul>
<div class="highlight"><pre><span class="c"># http port is the Manager Component endpoint port</span>
<span class="c"># Example:</span>
<span class="nv">http_port</span> <span class="o">=</span> 8182
</pre></div>


<h2>Run</h2>
<p>To start Manager, run the start-manager script in the bin directory.</p>
<div class="highlight"><pre>./bin/start-manager
</pre></div>
      </div>
    </div>
    </div>
      </div>
    </div>
    
    <footer class="footer">
      <div class="container">
      <div class="row">
	  <div class="col-lg-12">
	    <ul class="list-inline">
	      <li class="pull-right"><a href="#top">Back to top</a></li>
	      <li><a href="http://blog.fogbowcloud.org">Blog</a></li>
	      <li><a href="https://github.com/fogbow/">GitHub</a></li>
	      <li><a href="http://build.fogbowcloud.org">Build status</a></li>
	    </ul>
	    <p>Code released under the <a href="http://www.apache.org/licenses/LICENSE-2.0.html">Apache License Version 2.0</a>.</p>
	    <p>Based on <a href="http://getbootstrap.com" rel="nofollow">Bootstrap</a>. Icons from <a href="http://fortawesome.github.io/Font-Awesome/" rel="nofollow">Font Awesome</a>. Web fonts from <a href="http://www.google.com/webfonts" rel="nofollow">Google</a>.</p>
	  </div>
      </div>
      </div>
    </footer>

  </body>
</html>