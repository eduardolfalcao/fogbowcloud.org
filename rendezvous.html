<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>fogbow</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="shortcut icon" href="http://www.fogbowcloud.org/theme/img/icons/favicon.ico" />
    <link rel="stylesheet" href="http://www.fogbowcloud.org/theme/css/bootstrap.css">
  </head>
  <body>
    <div class="navbar navbar-default navbar-fixed-top">
      <div class="container">
        <div class="navbar-header">
          <a href="../" class="navbar-brand">fogbow</a>
          <button class="navbar-toggle" type="button" data-toggle="collapse" data-target="#navbar-main">
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
        </div>
        <ul class="nav navbar-nav navbar-right">
          <li >
            <a href="http://www.fogbowcloud.org/install-general.html">Install</a>
          </li>
          <li class="active">
            <a href="http://www.fogbowcloud.org/architecture.html">How it works</a>
          </li>
          <li >
            <a href="http://www.fogbowcloud.org/manager-cli.html">How to use it</a>
          </li>
          <li><a href="#">Contact us</a></li>
        </ul>
      </div>
    </div>
     <div class="container">
      <div class="bs-docs-section">
    <div class="bs-docs-section">
    <div class="row">
      <div class="col-lg-4">
      	<br>
        <ul class="nav nav-pills nav-stacked" style="max-width: 300px;">
            <li >
            	<a href="architecture">General architecture</a>
            </li>
            <li class="active">
            	<a href="rendezvous">Rendezvous</a>
            </li>
            <li >
            	<a href="manager">Manager</a>
            </li>
            <li >
            	<a href="opportunism">Opportunism</a>
            </li>
            <li >
            	<a href="green">Green</a>
            </li>
            <li >
            	<a href="multiplatform">Multiplatform</a>
            </li>
        </ul>
      </div>
      <div class="col-lg-8 page-content">
      	<h1>Rendezvous</h1>
<p>The Rendezvous is the discovery service of the fowbow federation. It allows members to find each other by providing a complete status of the federation. </p>
<h2>Rendezvous architecture</h2>
<p>Currently, the Rendezvous provides two methods to federation members: IamAlive and WhoIsAlive.</p>
<p>The first one allows a federation member to report resource information. In this sense, the Rendezvous component will periodically receive information from every federation manager, which will also work as a heartbeat, and tag this information with a timestamp. This data is valid for a given expiration interval, which is configurable. After this timeout, data is considered expired and this member will no longer show up as an active member of the federation.</p>
<p>The WhoIsAlive method allows a federation member to ask for the set of active federation members. The rendezvous component will then return resource information about all currently active members.</p>
<p>Also, one rendezvous communicates with other rendevous replicas to synchronize. The synchronization is made through a WhoIsAliveSync method. This method sends a message to all the replicas courrently known by the rendezvous asking for their known neighbors and their known managers alive. The response is then merged with the previous information.</p>
<p>All communication is done via XMPP according to the Rendezvous protocol.</p>
<h2>Rendezvous protocol</h2>
<h3>IAmAlive</h3>
<h4>Request</h4>
<div class="highlight"><pre><span class="nt">&lt;iq</span> <span class="na">type=</span><span class="s">&quot;get&quot;</span><span class="nt">&gt;</span>
   <span class="nt">&lt;query</span> <span class="na">xmlns=</span><span class="s">&quot;http://fogbowcloud.org/rendezvous/iamalive&quot;</span><span class="nt">&gt;</span>
      <span class="nt">&lt;status&gt;</span>
         <span class="nt">&lt;cpu-idle&gt;</span>value<span class="nt">&lt;/cpu-idle&gt;</span>
         <span class="nt">&lt;cpu-inuse&gt;</span>value<span class="nt">&lt;/cpu-inuse&gt;</span>
         <span class="nt">&lt;mem-idle&gt;</span>value<span class="nt">&lt;/mem-idle&gt;</span>
         <span class="nt">&lt;cpu-inuse&gt;</span>value<span class="nt">&lt;/mem-inuse&gt;</span>
      <span class="nt">&lt;/status&gt;</span>
   <span class="nt">&lt;/query&gt;</span>
<span class="nt">&lt;/iq&gt;</span>
</pre></div>


<h4>Response</h4>
<div class="highlight"><pre><span class="nt">&lt;iq</span> <span class="na">type=</span><span class="s">&quot;result&quot;</span><span class="nt">/&gt;</span>
</pre></div>


<hr />
<h3>WhoIsAlive</h3>
<h4>Request</h4>
<div class="highlight"><pre><span class="nt">&lt;iq</span> <span class="na">type=</span><span class="s">&quot;get&quot;</span><span class="nt">&gt;</span>
   <span class="nt">&lt;query</span> <span class="na">xmlns=</span><span class="s">&quot;http://fogbowcloud.org/rendezvous/whoisalive&quot;</span><span class="nt">/&gt;</span>
<span class="nt">&lt;/iq&gt;</span>
</pre></div>


<h4>Response</h4>
<div class="highlight"><pre><span class="nt">&lt;iq</span> <span class="na">type=</span><span class="s">&quot;result&quot;</span><span class="nt">&gt;</span>
   <span class="nt">&lt;query</span> <span class="na">xmlns=</span><span class="s">&quot;http://fogbowcloud.org/rendezvous/whoisalive&quot;</span><span class="nt">&gt;</span>
      <span class="nt">&lt;item</span> <span class="na">id=</span><span class="s">&quot;federated-cloud-id1&quot;</span><span class="nt">&gt;</span>
         <span class="nt">&lt;status&gt;</span>
            <span class="nt">&lt;cpu-idle&gt;</span>value<span class="nt">&lt;/cpu-idle&gt;</span>
            <span class="nt">&lt;cpu-inuse&gt;</span>value<span class="nt">&lt;/cpu-inuse&gt;</span>
            <span class="nt">&lt;mem-idle&gt;</span>value<span class="nt">&lt;/mem-idle&gt;</span>
            <span class="nt">&lt;cpu-inuse&gt;</span>value<span class="nt">&lt;/mem-inuse&gt;</span>
            <span class="nt">&lt;updated&gt;</span>value<span class="nt">&lt;/updated&gt;</span>  
         <span class="nt">&lt;/status&gt;</span>
      <span class="nt">&lt;/item&gt;</span>
      .
      .
      .
      <span class="nt">&lt;item</span> <span class="na">id=</span><span class="s">&quot;federated-cloud-idn&quot;</span><span class="nt">&gt;</span>
         <span class="nt">&lt;status&gt;</span>
            <span class="nt">&lt;cpu-idle&gt;</span>value<span class="nt">&lt;/cpu-idle&gt;</span>
            <span class="nt">&lt;cpu-inuse&gt;</span>value<span class="nt">&lt;/cpu-inuse&gt;</span>
            <span class="nt">&lt;mem-idle&gt;</span>value<span class="nt">&lt;/mem-idle&gt;</span>
            <span class="nt">&lt;cpu-inuse&gt;</span>value<span class="nt">&lt;/mem-inuse&gt;</span>
            <span class="nt">&lt;updated&gt;</span>value<span class="nt">&lt;/updated&gt;</span>  
         <span class="nt">&lt;/status&gt;</span>
      <span class="nt">&lt;/item&gt;</span>
   <span class="nt">&lt;/query&gt;</span>
<span class="nt">&lt;/iq&gt;</span>
</pre></div>


<h3>WhoIsAliveSync</h3>
<h4>Request</h4>
<div class="highlight"><pre><span class="nt">&lt;iq</span> <span class="na">type=</span><span class="s">&quot;get&quot;</span><span class="nt">&gt;</span>
   <span class="nt">&lt;query</span> <span class="na">xmlns=</span><span class="s">&quot;http://fogbowcloud.org/rendezvous/synch/whoisalive&quot;</span><span class="nt">/&gt;</span>
<span class="nt">&lt;/iq&gt;</span>
</pre></div>


<h4>Response</h4>
<div class="highlight"><pre><span class="nt">&lt;iq</span> <span class="na">type=</span><span class="s">&quot;result&quot;</span><span class="nt">&gt;</span>
   <span class="nt">&lt;query</span> <span class="na">xmlns=</span><span class="s">&quot;http://fogbowcloud.org/rendezvous/synch/whoisalive&quot;</span><span class="nt">/&gt;</span>
      <span class="nt">&lt;neighbors&gt;</span>
        <span class="nt">&lt;neighbor&gt;</span> id <span class="nt">&lt;/neighbor&gt;</span>
        .
        .
        .
        <span class="nt">&lt;neighbor&gt;</span> id <span class="nt">&lt;/neighbor&gt;</span>
      <span class="nt">&lt;/neighbors&gt;</span>
      <span class="nt">&lt;managers&gt;</span>
         <span class="nt">&lt;manager</span> <span class="na">id =</span> <span class="s">&quot;federated-cloud-id1&quot;</span> <span class="nt">&gt;</span>
               <span class="nt">&lt;cpu-idle&gt;</span>value<span class="nt">&lt;/cpu-idle&gt;</span>
               <span class="nt">&lt;cpu-inuse&gt;</span>value<span class="nt">&lt;/cpu-inuse&gt;</span>
               <span class="nt">&lt;mem-idle&gt;</span>value<span class="nt">&lt;/mem-idle&gt;</span>
               <span class="nt">&lt;cpu-inuse&gt;</span>value<span class="nt">&lt;/mem-inuse&gt;</span>
               <span class="nt">&lt;updated&gt;</span>value<span class="nt">&lt;/updated&gt;</span>  
            <span class="nt">&lt;/status&gt;</span>
         <span class="nt">&lt;/manager&gt;</span>
         .
         .
         .
         <span class="nt">&lt;mananger</span> <span class="na">id=</span><span class="s">&quot;federated-cloud-idn&quot;</span><span class="nt">&gt;</span>
            <span class="nt">&lt;status&gt;</span>
               <span class="nt">&lt;cpu-idle&gt;</span>value<span class="nt">&lt;/cpu-idle&gt;</span>
               <span class="nt">&lt;cpu-inuse&gt;</span>value<span class="nt">&lt;/cpu-inuse&gt;</span>
               <span class="nt">&lt;mem-idle&gt;</span>value<span class="nt">&lt;/mem-idle&gt;</span>
               <span class="nt">&lt;cpu-inuse&gt;</span>value<span class="nt">&lt;/mem-inuse&gt;</span>
               <span class="nt">&lt;updated&gt;</span>value<span class="nt">&lt;/updated&gt;</span>  
            <span class="nt">&lt;/status&gt;</span>
         <span class="nt">&lt;/manager&gt;</span>
      <span class="nt">&lt;/managers&gt;</span>
   <span class="nt">&lt;/query&gt;</span>
<span class="nt">&lt;/iq&gt;</span>
</pre></div>


<p>Obs: The updated value is the timestamp of information. It will be formatted according to ISO 8601 standard. </p>
      </div>
    </div>
    </div>
      </div>
    </div>
    
    <footer class="footer">
      <div class="container">
      <div class="row">
	  <div class="col-lg-12">
	    <ul class="list-inline">
	      <li class="pull-right"><a href="#top">Back to top</a></li>
	      <li><a href="http://blog.fogbowcloud.org">Blog</a></li>
	      <li><a href="https://github.com/fogbow/">GitHub</a></li>
	      <li><a href="http://build.fogbowcloud.org">Build status</a></li>
	    </ul>
	    <p>Code released under the <a href="http://www.apache.org/licenses/LICENSE-2.0.html">Apache License Version 2.0</a>.</p>
	    <p>Based on <a href="http://getbootstrap.com" rel="nofollow">Bootstrap</a>. Icons from <a href="http://fortawesome.github.io/Font-Awesome/" rel="nofollow">Font Awesome</a>. Web fonts from <a href="http://www.google.com/webfonts" rel="nofollow">Google</a>.</p>
	  </div>
      </div>
      </div>
    </footer>

  </body>
</html>